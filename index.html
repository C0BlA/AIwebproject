<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ê°ì • ë‹¤ì´ì–´ë¦¬</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <div class="header-bar">
    <button class="sidebar-toggle-btn" onclick="toggleSidebar()">â˜° ë©”ë‰´</button>
    <a href="/" class="home-link">ê°ì •ë‹¤ì´ì–´ë¦¬</a>
    <div class="auth-buttons">
      <button>ë¡œê·¸ì¸</button>
      <button>íšŒì›ê°€ì…</button>
    </div>
  </div>

  <div class="container">
    <!-- ì‚¬ì´ë“œë°” -->
    <div class="sidebar" id="sidebar">
      <button class="toggle-btn" onclick="toggleSidebar()">â† ë‹«ê¸°</button>

      <h2>1ì£¼ì¼ ê°ì • ë¶„ì„</h2>
      <div class="emotion-graph">
        <p>[ê¸°ë¶„ ê·¸ë˜í”„ ë“¤ì–´ê°ˆ ìë¦¬]</p>
      </div>

      <h2>ìµœê·¼ ë‹¤ì´ì–´ë¦¬</h2>
      <ul>
        <li><a href="#">2025-05-12 - ì˜ˆì‹œ</a></li>
        <li><a href="#">2025-05-11 - ì˜ˆì‹œ</a></li>
      </ul>
    </div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="main-content-wrapper">
      <div class="main-content">
        <!-- ë‹¬ë ¥ -->
        <div class="calendar-container">
          <div class="calendar-header">
            <button onclick="prevMonth()">â†</button>
            <h3 id="month-year">2025ë…„ 5ì›”</h3>
            <button onclick="nextMonth()">â†’</button>
          </div>
          <table class="calendar" id="calendar"></table>
        </div>

        <!-- ë‹¤ì´ì–´ë¦¬ ì˜ì—­ -->
        <div class="diary-container" id="diary-container">
          <p>ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
        </div>
      </div>

      <!-- í•˜ë‹¨ ìŒì•… í”Œë ˆì´ì–´ -->
      <div class="footer-player">
        <iframe width="100%" height="100" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/366653432&color=%2344545c&auto_play=true&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"></iframe>
        <div style="font-size: 10px; color: #cccccc; word-break: break-word; font-family: sans-serif;">
          <a href="https://soundcloud.com/nawhij" target="_blank">nawhij</a> Â· 
          <a href="https://soundcloud.com/nawhij/so-glad" target="_blank">So Glad</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    const emojiByFeeling = ['â˜€ï¸', 'ğŸŒ¤', 'â›…', 'ğŸŒ§', 'â›ˆ', 'ğŸŒª'];
    const dummyDB = {
      "2025-05-12": {
        title: "ì¦ê±°ìš´ í•˜ë£¨",
        text: "ì˜¤ëŠ˜ì€ ë„ˆë¬´ ì¦ê±°ì› ë‹¤!",
        image: "https://via.placeholder.com/300x200.png?text=Diary+Image"
      },
    };

    function generateCalendar(month, year) {
      const calendar = document.getElementById('calendar');
      const monthYear = document.getElementById('month-year');
      const firstDay = new Date(year, month).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      calendar.innerHTML = '';
      monthYear.textContent = `${year}ë…„ ${month + 1}ì›”`;

      let date = 1;
      for (let i = 0; i < 6; i++) {
        const row = document.createElement('tr');

        for (let j = 0; j < 7; j++) {
          const cell = document.createElement('td');
          if (i === 0 && j < firstDay) {
            cell.innerHTML = '';
          } else if (date > daysInMonth) {
            break;
          } else {
            const emoji = emojiByFeeling[1];
            cell.innerHTML = `<button onclick="showDiary('${year}-${(month + 1).toString().padStart(2, '0')}-${date.toString().padStart(2, '0')}')">${emoji}<br>${date}</button>`;
            date++;
          }
          row.appendChild(cell);
        }

        calendar.appendChild(row);
      }
    }

    function showDiary(dateStr) {
      const container = document.getElementById('diary-container');
      const diaryData = dummyDB[dateStr];

      if (diaryData) {
        container.innerHTML = `
          <h2>${diaryData.title}</h2>
          <p>${diaryData.text}</p>
          ${diaryData.image ? `<img src="${diaryData.image}" alt="ë‹¤ì´ì–´ë¦¬ ì´ë¯¸ì§€" />` : ''}
          <div class="diary-buttons">
            <button onclick="editDiary('${dateStr}')">ìˆ˜ì •</button>
            <button onclick="deleteDiary('${dateStr}')">ì‚­ì œ</button>
          </div>
        `;
      } else {
        container.innerHTML = `
          <input type="text" id="diary-title-input" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" />
          <textarea id="diary-text-input" rows="5" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
          <input type="file" id="diary-image-input" accept="image/*" />
          <div class="diary-buttons">
            <button onclick="saveDiary('${dateStr}')">ì €ì¥</button>
            <button onclick="cancelDiary()">ì·¨ì†Œ</button>
          </div>
        `;
      }
    }

    function saveDiary(dateStr) {
      const title = document.getElementById('diary-title-input').value;
      const text = document.getElementById('diary-text-input').value;
      const imageFile = document.getElementById('diary-image-input').files[0];
      const imageUrl = imageFile ? URL.createObjectURL(imageFile) : '';

      dummyDB[dateStr] = { title, text, image: imageUrl };
      showDiary(dateStr);
    }

    function cancelDiary() {
      document.getElementById('diary-container').innerHTML = `<p>ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>`;
    }

    function editDiary(dateStr) {
      const data = dummyDB[dateStr];
      const container = document.getElementById('diary-container');
      container.innerHTML = `
        <input type="text" id="diary-title-input" value="${data.title}" />
        <textarea id="diary-text-input" rows="5">${data.text}</textarea>
        <input type="file" id="diary-image-input" accept="image/*" />
        <div class="diary-buttons">
          <button onclick="saveDiary('${dateStr}')">ì €ì¥</button>
          <button onclick="cancelDiary()">ì·¨ì†Œ</button>
        </div>
      `;
    }

    function deleteDiary(dateStr) {
      if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        delete dummyDB[dateStr];
        cancelDiary();
      }
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('hidden');
    }

    generateCalendar(currentMonth, currentYear);
  </script>
</body>
</html>
